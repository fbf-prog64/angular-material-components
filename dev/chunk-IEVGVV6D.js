import{a as S,b as ue,c as he}from"./chunk-OH5WETLJ.js";import{a as me,b as pe,c as ge}from"./chunk-KS4FPR4Z.js";import{a as d,b as le}from"./chunk-FI7WBM6F.js";import{f as de,i as ce}from"./chunk-2VUYVLHY.js";import{b as Z,d as ee}from"./chunk-VMN6HSS7.js";import{$ as l,$a as Q,$b as r,Ba as x,Bd as re,Eb as j,Gb as L,Ia as X,Ld as oe,Na as V,Ob as T,Pa as Y,Q as U,V as N,W as C,_ as I,_a as K,ab as $,da as h,ea as m,fb as w,fd as B,g as D,gb as M,ha as z,hb as b,j as u,la as g,mb as P,nb as J,oa as o,pb as p,ra as E,rd as te,sa as O,sb as F,td as ie,ud as ae,vd as ne,wa as q,wb as W,wd as se,xb as R,yb as H}from"./chunk-XUGIX3MZ.js";function v(a){return Error(`NgxMatDatetimePicker: No provider found for ${a}. You must import one of the following modules at your application root: NgxMatNativeDateModule, NgxMatMomentDateModule, or provide a custom implementation.`)}var De={provide:te,useExisting:N(()=>A),multi:!0},xe={provide:ie,useExisting:N(()=>A),multi:!0},A=(()=>{class a{get value(){return this._value()}set value(e){this._assignValue(e)}get min(){return this._min()}set min(e){let t=this._dateAdapter?.getValidDateOrNull(this._dateAdapter.deserialize(e));this._min.set(t),this._validatorOnChange()}get max(){return this._max()}set max(e){let t=this._dateAdapter?.getValidDateOrNull(this._dateAdapter.deserialize(e));this._max.set(t),this._validatorOnChange()}get dateFilter(){return this._dateFilter()}set dateFilter(e){let t=this._matchesFilter(this.value);this._dateFilter.set(e),this._matchesFilter(this.value)!==t&&this._validatorOnChange()}get disabled(){return this._disabled()}set disabled(e){let t=B(e);this._disabled.set(t),this.focused&&t&&(this.focused=!1),this.stateChanges.next()}_getValidators(){return[this._parseValidator,this._minValidator,this._maxValidator,this._filterValidator]}get empty(){return!this._elementRef.nativeElement.value&&!this.value}get shouldLabelFloat(){return this.focused||!this.empty}get required(){return this._required()}set required(e){this._required.set(B(e)),this.stateChanges.next()}get placeholder(){return this._placeholder()}set placeholder(e){this._placeholder.set(e),this.stateChanges.next()}get errorState(){return this._errorState()}constructor(){if(this._dateAdapter=l(d,{optional:!0}),this._elementRef=l(q),this._dateFormats=l(le,{optional:!0}),this._formField=l(ce,{optional:!0}),this.ngControl=null,this._value=o(null),this._min=o(null),this._max=o(null),this._dateFilter=o(()=>!0),this._disabled=o(!1),this.dateChange=new g,this.dateInput=new g,this.stateChanges=new u,this._onTouched=()=>{},this._validatorOnChange=()=>{},this._cvaOnChange=()=>{},this._valueChangesSubscription=D.EMPTY,this._localeSubscription=D.EMPTY,this._parseValidator=()=>this._lastValueValid?null:{ngxMatDatetimePickerParse:{text:this._elementRef.nativeElement.value}},this._filterValidator=e=>{let t=this._dateAdapter?.getValidDateOrNull(this._dateAdapter.deserialize(e.value));return!t||this._matchesFilter(t)?null:{ngxMatDatetimePickerFilter:!0}},this._minValidator=e=>{let t=this._dateAdapter?.getValidDateOrNull(this._dateAdapter.deserialize(e.value)),i=this.min;return!i||!t||this._dateAdapter.compareDate(i,t)<=0?null:{ngxMatDatetimePickerMin:{min:i,actual:t}}},this._maxValidator=e=>{let t=this._dateAdapter?.getValidDateOrNull(this._dateAdapter.deserialize(e.value)),i=this.max;return!i||!t||this._dateAdapter.compareDate(i,t)>=0?null:{ngxMatDatetimePickerMax:{max:i,actual:t}}},this._validator=ae.compose(this._getValidators()),this._lastValueValid=!1,this.controlType="ngx-mat-datetime-picker-input-v2",this.focused=!1,this._required=o(!1),this._placeholder=o(""),this._errorState=o(!1),this.id=`ngx-mat-datetime-picker-input-${Math.random().toString(36).substr(2,9)}`,this._injector=l(z),!this._dateAdapter)throw v("DateAdapter");if(!this._dateFormats)throw v("NGX_MAT_DATE_FORMATS");this._localeSubscription=this._dateAdapter.localeChanges.subscribe(()=>{this._assignValue(this.value)})}ngOnInit(){console.log("\u{1F527} NgxMatDatetimePickerInputV2 ngOnInit called"),this.ngControl=this._injector.get(ne,null,{optional:!0,self:!0}),console.log("\u{1F527} NgControl found:",!!this.ngControl,this.ngControl?.constructor?.name),this.ngxMatDatetimePicker?(console.log("\u{1F527} Registering input with datepicker"),this.ngxMatDatetimePicker._registerInput(this)):console.log("\u274C No datepicker available for registration")}ngOnDestroy(){this._valueChangesSubscription.unsubscribe(),this._localeSubscription.unsubscribe(),this.stateChanges.complete()}registerOnValidatorChange(e){this._validatorOnChange=e}validate(e){return this._validator?this._validator(e):null}writeValue(e){this._assignValue(e)}registerOnChange(e){this._cvaOnChange=e,console.log("CVA registerOnChange called",!!e)}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_onKeydown(e){let t=e.altKey&&e.keyCode===40;this.ngxMatDatetimePicker&&t&&!this._elementRef.nativeElement.readOnly&&(this.ngxMatDatetimePicker.open(),e.preventDefault())}_onInput(e){let t=this._dateAdapter.parse(e,this._dateFormats.display.dateInput);this._lastValueValid=this._dateAdapter.isValid(t);let i=this._dateAdapter.getValidDateOrNull(t);this._value.set(i),this._cvaOnChange(i),this.dateInput.emit(new k(this,this._elementRef.nativeElement))}_onChange(){this.dateChange.emit(new k(this,this._elementRef.nativeElement))}_onBlur(){this.value&&this._formatValue(this.value),this.focused=!1,this._onTouched(),this.stateChanges.next()}_onClick(e){this.ngxMatDatetimePicker&&!this.disabled&&this.ngxMatDatetimePicker.open()}_formatValue(e){let t=e?this._dateAdapter.format(e,this._dateFormats.display.dateInput):"";this._elementRef.nativeElement.value=t}_assignValue(e){this._value.set(e),this._formatValue(e),this.stateChanges.next()}updateValue(e){console.log("updateValue called with:",e,"onChange available:",!!this._cvaOnChange),this._value.set(e),this._formatValue(e),this._cvaOnChange&&(console.log("Calling _cvaOnChange with:",e),this._cvaOnChange(e)),this.dateChange.emit(new k(this,this._elementRef.nativeElement)),this._onTouched&&this._onTouched(),this.stateChanges.next()}_matchesFilter(e){let t=this.dateFilter;return!t||!e||t(e)}setDescribedByIds(e){}onContainerClick(){this.focus()}focus(){this._elementRef.nativeElement.focus(),this.focused=!0,this.stateChanges.next()}getConnectedOverlayOrigin(){return this._formField?.getConnectedOverlayOrigin()||this._elementRef}getStartValue(){return this.value}getThemePalette(){return"primary"}getOverlayLabelId(){return this.id}static{this.\u0275fac=function(t){return new(t||a)}}static{this.\u0275dir=Y({type:a,selectors:[["input","ngxMatDatetimePicker",""]],hostAttrs:[1,"ngx-mat-datetime-picker-input"],hostVars:6,hostBindings:function(t,i){t&1&&p("input",function(s){return i._onInput(s.target.value)})("change",function(){return i._onChange()})("blur",function(){return i._onBlur()})("keydown",function(s){return i._onKeydown(s)})("click",function(s){return i._onClick(s)}),t&2&&(J("disabled",i.disabled),K("aria-haspopup",i.ngxMatDatetimePicker?"dialog":null)("aria-owns",(i.ngxMatDatetimePicker==null?null:i.ngxMatDatetimePicker.opened)&&i.ngxMatDatetimePicker.id||null)("min",i.min?i._dateAdapter.toIso8601(i.min):null)("max",i.max?i._dateAdapter.toIso8601(i.max):null)("data-mat-calendar",i.ngxMatDatetimePicker?i.ngxMatDatetimePicker.id:null))},inputs:{ngxMatDatetimePicker:"ngxMatDatetimePicker",value:"value",min:"min",max:"max",dateFilter:"dateFilter",disabled:"disabled"},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[T([De,xe,{provide:de,useExisting:a}])]})}}return a})(),k=class{constructor(c,e){this.target=c,this.targetElement=e,this.value=this.target.value}};var y=class{constructor(c,e){this.start=c,this.end=e}},_=(()=>{class a{constructor(e,t){this.selection=e,this._adapter=t,this._selectionChanged=new u,this.selectionChanged=this._selectionChanged,this.selection=e}updateSelection(e,t){let i=this.selection;this.selection=e,this._selectionChanged.next({selection:e,source:t,oldValue:i})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(e){return this._adapter.isDateInstance(e)&&this._adapter.isValid(e)}static{this.\u0275fac=function(t){X()}}static{this.\u0275prov=C({token:a,factory:a.\u0275fac})}}return a})(),Me=(()=>{class a extends _{constructor(e){super(null,e)}add(e){super.updateSelection(e,this)}isValid(){return this.selection!=null&&this._isValidDateInstance(this.selection)}isComplete(){return this.selection!=null}clone(){let e=new a(this._adapter);return e.updateSelection(this.selection,this),e}static{this.\u0275fac=function(t){return new(t||a)(I(d))}}static{this.\u0275prov=C({token:a,factory:a.\u0275fac})}}return a})(),be=(()=>{class a extends _{constructor(e){super(new y(null,null),e)}add(e){let{start:t,end:i}=this.selection;t==null?t=e:i==null?i=e:(t=e,i=null),super.updateSelection(new y(t,i),this)}isValid(){let{start:e,end:t}=this.selection;return e==null&&t==null?!0:e!=null&&t!=null?this._isValidDateInstance(e)&&this._isValidDateInstance(t)&&this._adapter.compareDate(e,t)<=0:(e==null||this._isValidDateInstance(e))&&(t==null||this._isValidDateInstance(t))}isComplete(){return this.selection.start!=null&&this.selection.end!=null}clone(){let e=new a(this._adapter);return e.updateSelection(this.selection,this),e}static{this.\u0275fac=function(t){return new(t||a)(I(d))}}static{this.\u0275prov=C({token:a,factory:a.\u0275fac})}}return a})();function ve(a,c){return a||new Me(c)}var _e={provide:_,deps:[[new E,new O,_],d],useFactory:ve};function ke(a,c){return a||new be(c)}var qe={provide:_,deps:[[new E,new O,_],d],useFactory:ke};var Ce=["calendar"],Ve=["timepicker"];function we(a,c){if(a&1){let e=P();M(0,"div",4)(1,"ngx-mat-timepicker",8,1),p("ngModelChange",function(i){h(e);let n=F();return m(n.onTimeChanged(i))}),b()()}if(a&2){let e=F();x(),w("ngModel",e.selectedDateTime())("color",e.data.color)("showSpinners",e.data.showSpinners??!0)("showSeconds",e.data.showSeconds??!1)("stepHour",e.data.stepHour??1)("stepMinute",e.data.stepMinute??1)("stepSecond",e.data.stepSecond??1)("enableMeridian",e.data.enableMeridian??!1)("defaultTime",e.data.defaultTime)("disabled",e.data.disabled)}}var fe=(()=>{class a{constructor(){this.dialogRef=l(me),this.data=l(pe),this._dateAdapter=l(d),this._destroyed=new u,this.selectedDate=o(this.data.value||null),this.selectedDateTime=o(this.data.value||null);let e=this.data.value;e&&(this.selectedDate.set(e),this.selectedDateTime.set(e))}ngOnInit(){this.calendar&&this.calendar.selectedChange.pipe(U(this._destroyed)).subscribe(e=>this.onDateSelected(e)),this.data.preventOverlayClick&&(this.dialogRef.disableClose=!0)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}onDateSelected(e){if(console.log("Date selected:",e),this.selectedDate.set(e),e)if(this.data.hideTime)this.selectedDateTime.set(e);else{let t=this.selectedDateTime();if(t){let i=this._extractTimeFromDate(t),n=this._combineDateTime(e,i);this.selectedDateTime.set(n)}else{let i=this._getDefaultTime(),n=this._combineDateTime(e,i);this.selectedDateTime.set(n)}}else this.selectedDateTime.set(null)}onYearSelected(e){}onMonthSelected(e){}onTimeChanged(e){if(console.log("\u23F0 Time changed:",e),e){let t=this.selectedDate();if(console.log("\u{1F4C5} Current date for time combination:",t),t){let i=this._extractTimeFromDate(e),n=this._combineDateTime(t,i);console.log("\u{1F550} Combined datetime:",n),this.selectedDateTime.set(n)}else console.log("\u{1F550} No current date, using time as-is"),this.selectedDateTime.set(e)}}onApply(){let e=this.data.hideTime?this.selectedDate():this.selectedDateTime();console.log("\u2705 Dialog onApply - returning result:",e),this.dialogRef.close(e)}onCancel(){console.log("\u274C Dialog onCancel"),this.dialogRef.close()}_getDefaultTime(){if(this.data.defaultTime)return[...this.data.defaultTime];if(this.data.value)return this._extractTimeFromDate(this.data.value);let e=new Date;return[e.getHours(),e.getMinutes(),e.getSeconds()]}_extractTimeFromDate(e){let t=this._dateAdapter.getHours(e),i=this._dateAdapter.getMinutes(e),n=this._dateAdapter.getSeconds(e);return[t,i,n]}_combineDateTime(e,t){let i=this._dateAdapter.clone(e),n=this._dateAdapter.toIso8601(i),s=new Date(n);return s.setHours(t[0]||0),s.setMinutes(t[1]||0),s.setSeconds(t[2]||0),s.setMilliseconds(0),this._dateAdapter.deserialize(s.toISOString())}static{this.\u0275fac=function(t){return new(t||a)}}static{this.\u0275cmp=V({type:a,selectors:[["ngx-mat-datetime-picker-content-v2"]],viewQuery:function(t,i){if(t&1&&W(Ce,7)(Ve,5),t&2){let n;R(n=H())&&(i.calendar=n.first),R(n=H())&&(i.timepicker=n.first)}},hostAttrs:[1,"ngx-mat-datetime-picker-content-v2"],hostVars:2,hostBindings:function(t,i){t&2&&j("ngx-mat-datetime-picker-content-touch",i.data.touchUi)},decls:9,vars:10,consts:[["calendar",""],["timepicker",""],[1,"ngx-mat-datetime-picker-content"],[3,"selectedChange","yearSelected","monthSelected","startView","startAt","minDate","maxDate","dateFilter","selected"],[1,"ngx-mat-datetime-picker-time"],[1,"ngx-mat-datetime-picker-actions"],["mat-button","","type","button",1,"ngx-mat-datetime-picker-cancel-button",3,"click"],["mat-button","","type","button",1,"ngx-mat-datetime-picker-apply-button",3,"click","color"],[3,"ngModelChange","ngModel","color","showSpinners","showSeconds","stepHour","stepMinute","stepSecond","enableMeridian","defaultTime","disabled"]],template:function(t,i){if(t&1){let n=P();M(0,"div",2)(1,"mat-calendar",3,0),p("selectedChange",function(f){return h(n),m(i.onDateSelected(f))})("yearSelected",function(f){return h(n),m(i.onYearSelected(f))})("monthSelected",function(f){return h(n),m(i.onMonthSelected(f))}),b(),Q(3,we,3,10,"div",4),M(4,"div",5)(5,"button",6),p("click",function(){return h(n),m(i.onCancel())}),L(6," Cancelar "),b(),M(7,"button",7),p("click",function(){return h(n),m(i.onApply())}),L(8," Aplicar "),b()()()}t&2&&(j("ngx-mat-datetime-picker-content-touch",i.data.touchUi),x(),w("startView",i.data.startView||"month")("startAt",i.selectedDate()||i.data.value)("minDate",i.data.minDate)("maxDate",i.data.maxDate)("dateFilter",i.data.dateFilter)("selected",i.selectedDate()),x(2),$(i.data.hideTime?-1:3),x(4),w("color",i.data.color))},dependencies:[oe,se,re,he,ee,Z,ue],styles:[`.ngx-mat-datetime-picker-content-v2{display:flex;flex-direction:column;max-height:90vh;min-width:296px}.ngx-mat-datetime-picker-content-v2 .ngx-mat-datetime-picker-content{display:flex;flex-direction:column}.ngx-mat-datetime-picker-content-v2 .ngx-mat-datetime-picker-time{padding:16px;border-top:1px solid rgba(0,0,0,.12)}.mat-dark .ngx-mat-datetime-picker-content-v2 .ngx-mat-datetime-picker-time{border-top-color:#ffffff1f}.ngx-mat-datetime-picker-content-v2 .ngx-mat-datetime-picker-actions{display:flex;justify-content:flex-end;gap:8px;padding:8px 16px 16px;border-top:1px solid rgba(0,0,0,.12)}.mat-dark .ngx-mat-datetime-picker-content-v2 .ngx-mat-datetime-picker-actions{border-top-color:#ffffff1f}.ngx-mat-datetime-picker-content-v2.ngx-mat-datetime-picker-content-touch{min-width:320px}.ngx-mat-datetime-picker-content-v2.ngx-mat-datetime-picker-content-touch .ngx-mat-datetime-picker-time{padding:24px}.ngx-mat-datetime-picker-content-v2.ngx-mat-datetime-picker-content-touch .ngx-mat-datetime-picker-actions{padding:16px 24px 24px}.ngx-mat-datetime-picker-content-v2 mat-calendar{display:block}.ngx-mat-datetime-picker-content-v2 mat-calendar .mat-calendar-header{padding:8px 8px 0}.ngx-mat-datetime-picker-content-v2 mat-calendar .mat-calendar-content{padding:0 8px 8px}.ngx-mat-datetime-picker-content-v2 ngx-mat-timepicker{width:100%;display:flex;justify-content:center;align-items:center}.ngx-mat-datetime-picker-content-v2 ngx-mat-timepicker .ngx-mat-timepicker-container{justify-content:center}.ngx-mat-datetime-picker-content-enter{opacity:0;transform:scale(.9);transition:opacity .15s cubic-bezier(.25,.8,.25,1),transform .15s cubic-bezier(.25,.8,.25,1)}.ngx-mat-datetime-picker-content-enter-active{opacity:1;transform:scale(1)}.ngx-mat-datetime-picker-content-exit{opacity:1;transform:scale(1);transition:opacity .15s cubic-bezier(.4,0,.2,1),transform .15s cubic-bezier(.4,0,.2,1)}.ngx-mat-datetime-picker-content-exit-active{opacity:0;transform:scale(.9)}
`],encapsulation:2,changeDetection:0})}}return a})();var Te=0,vt=(()=>{class a{constructor(){if(this._dialog=l(ge),this._dateAdapter=l(d,{optional:!0}),this._dialogRef=null,this._inputStateChanges=D.EMPTY,this.id=`ngx-mat-datetime-picker-${Te++}`,this.stateChanges=new u,this.openedStream=new g,this.closedStream=new g,this.startView=r("month"),this.color=r("primary"),this.touchUi=r(!1),this.disabled=r(!1),this.hideTime=r(!1),this.showSpinners=r(!0),this.showSeconds=r(!1),this.stepHour=r(S),this.stepMinute=r(S),this.stepSecond=r(S),this.enableMeridian=r(!1),this.disableMinute=r(!1),this.defaultTime=r(),this.startAt=r(null),this.panelClass=r([]),this._opened=o(!1),this.opened=this._opened.asReadonly(),!this._dateAdapter)throw v("DateAdapter")}ngOnDestroy(){this._inputStateChanges.unsubscribe(),this.stateChanges.complete(),this.close()}_registerInput(e){if(console.log("\u{1F517} Registering input with datepicker:",e.constructor.name),this.datepickerInput)throw Error("A MatDatepicker can only be associated with a single input.");this.datepickerInput=e,this._inputStateChanges=e.stateChanges.subscribe(()=>this.stateChanges.next()),console.log("\u2705 Input successfully registered")}open(){if(!(this._opened()||this.disabled())){if(!this.datepickerInput)throw Error("Attempted to open an MatDatepicker with no associated input.");this._opened.set(!0),this._openAsDialog(),this.openedStream.emit()}}close(){this._opened()&&(this._dialogRef&&(this._dialogRef.close(),this._dialogRef=null),this._opened.set(!1),this.closedStream.emit())}select(e){}_getMinDate(){return this.datepickerInput?.min||null}_getMaxDate(){return this.datepickerInput?.max||null}_getDateFilter(){return this.datepickerInput?.dateFilter||null}_openAsDialog(){console.debug("\u{1F680} Opening datetime picker dialog");let e=["ngx-mat-datepicker-dialog"],t=this.panelClass();t&&(Array.isArray(t)?e.push(...t.filter(n=>n)):e.push(t));let i=this.datepickerInput?.getStartValue();console.debug("\u{1F4C5} Initial value for dialog:",i),this._dialogRef=this._dialog.open(fe,{panelClass:e,hasBackdrop:!0,backdropClass:"cdk-overlay-dark-backdrop",disableClose:!1,width:this.touchUi()?"320px":"328px",data:{datepicker:this,color:this.color(),touchUi:this.touchUi(),hideTime:this.hideTime(),showSpinners:this.showSpinners(),showSeconds:this.showSeconds(),stepHour:this.stepHour(),stepMinute:this.stepMinute(),stepSecond:this.stepSecond(),enableMeridian:this.enableMeridian(),defaultTime:this.defaultTime(),disabled:this.disabled(),startView:this.startView(),minDate:this._getMinDate(),maxDate:this._getMaxDate(),dateFilter:this._getDateFilter(),value:i}}),this._dialogRef.afterClosed().subscribe(n=>{console.debug("\u{1F51A} Dialog closed with result:",n),n!==void 0&&this.datepickerInput?(console.debug("\u{1F4DD} Attempting to update input value with:",n),console.debug("\u{1F4DD} Input instance:",this.datepickerInput.constructor.name),this.datepickerInput instanceof A?(console.debug("\u2705 Calling updateValue on NgxMatDatetimePickerInputV2"),this.datepickerInput.updateValue(n)):console.debug("\u274C Input is not instance of NgxMatDatetimePickerInputV2")):console.debug("\u274C No result or no input available"),this.close()})}static{this.\u0275fac=function(t){return new(t||a)}}static{this.\u0275cmp=V({type:a,selectors:[["ngx-mat-datetime-picker"]],inputs:{startView:[1,"startView"],color:[1,"color"],touchUi:[1,"touchUi"],disabled:[1,"disabled"],hideTime:[1,"hideTime"],showSpinners:[1,"showSpinners"],showSeconds:[1,"showSeconds"],stepHour:[1,"stepHour"],stepMinute:[1,"stepMinute"],stepSecond:[1,"stepSecond"],enableMeridian:[1,"enableMeridian"],disableMinute:[1,"disableMinute"],defaultTime:[1,"defaultTime"],startAt:[1,"startAt"],panelClass:[1,"panelClass"]},outputs:{openedStream:"openedStream",closedStream:"closedStream"},exportAs:["ngxMatDatetimePicker"],features:[T([_e])],decls:0,vars:0,template:function(t,i){},encapsulation:2,changeDetection:0})}}return a})();export{y as a,_ as b,_e as c,v as d,A as e,vt as f};
